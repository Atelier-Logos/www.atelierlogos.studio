# Get Crate Documentation

Extract comprehensive documentation and metadata for a specific Rust crate from crates.io.

## Endpoint

```http
GET /api/ferropipe/crate/{name}
```

## URL Parameters

<div className="not-prose my-8">
  <div className="overflow-x-auto rounded-lg border border-border">
    <table className="w-full">
      <thead>
        <tr className="border-b border-border bg-muted/50">
          <th className="px-6 py-4 text-left text-sm font-medium text-muted-foreground">Parameter</th>
          <th className="px-6 py-4 text-left text-sm font-medium text-muted-foreground">Type</th>
          <th className="px-6 py-4 text-left text-sm font-medium text-muted-foreground">Required</th>
          <th className="px-6 py-4 text-left text-sm font-medium text-muted-foreground">Description</th>
        </tr>
      </thead>
      <tbody className="divide-y divide-border">
        <tr className="hover:bg-muted/30 transition-colors">
          <td className="px-6 py-4 text-sm font-mono font-medium">`name`</td>
          <td className="px-6 py-4 text-sm text-muted-foreground">string</td>
          <td className="px-6 py-4 text-sm text-muted-foreground">Yes</td>
          <td className="px-6 py-4 text-sm">The name of the crate to fetch</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

## Query Parameters

<div className="not-prose my-8">
  <div className="overflow-x-auto rounded-lg border border-border">
    <table className="w-full">
      <thead>
        <tr className="border-b border-border bg-muted/50">
          <th className="px-6 py-4 text-left text-sm font-medium text-muted-foreground">Parameter</th>
          <th className="px-6 py-4 text-left text-sm font-medium text-muted-foreground">Type</th>
          <th className="px-6 py-4 text-left text-sm font-medium text-muted-foreground">Default</th>
          <th className="px-6 py-4 text-left text-sm font-medium text-muted-foreground">Required</th>
          <th className="px-6 py-4 text-left text-sm font-medium text-muted-foreground">Description</th>
        </tr>
      </thead>
      <tbody className="divide-y divide-border">
        <tr className="hover:bg-muted/30 transition-colors">
          <td className="px-6 py-4 text-sm font-mono font-medium">`version`</td>
          <td className="px-6 py-4 text-sm text-muted-foreground">string</td>
          <td className="px-6 py-4 text-sm text-muted-foreground">`latest`</td>
          <td className="px-6 py-4 text-sm text-muted-foreground">No</td>
          <td className="px-6 py-4 text-sm">Specific version or "latest" for the most recent</td>
        </tr>
        <tr className="hover:bg-muted/30 transition-colors">
          <td className="px-6 py-4 text-sm font-mono font-medium">`depth`</td>
          <td className="px-6 py-4 text-sm text-muted-foreground">string</td>
          <td className="px-6 py-4 text-sm text-muted-foreground">`basic`</td>
          <td className="px-6 py-4 text-sm text-muted-foreground">No</td>
          <td className="px-6 py-4 text-sm">Extraction depth: `basic`, `full`, or `deep`</td>
        </tr>
        <tr className="hover:bg-muted/30 transition-colors">
          <td className="px-6 py-4 text-sm font-mono font-medium">`fresh`</td>
          <td className="px-6 py-4 text-sm text-muted-foreground">boolean</td>
          <td className="px-6 py-4 text-sm text-muted-foreground">`false`</td>
          <td className="px-6 py-4 text-sm text-muted-foreground">No</td>
          <td className="px-6 py-4 text-sm">Bypass cache and get fresh data</td>
        </tr>
        <tr className="hover:bg-muted/30 transition-colors">
          <td className="px-6 py-4 text-sm font-mono font-medium">`examples`</td>
          <td className="px-6 py-4 text-sm text-muted-foreground">boolean</td>
          <td className="px-6 py-4 text-sm text-muted-foreground">`false`</td>
          <td className="px-6 py-4 text-sm text-muted-foreground">No</td>
          <td className="px-6 py-4 text-sm">Include code examples (Full+ tier)</td>
        </tr>
        <tr className="hover:bg-muted/30 transition-colors">
          <td className="px-6 py-4 text-sm font-mono font-medium">`dependencies`</td>
          <td className="px-6 py-4 text-sm text-muted-foreground">boolean</td>
          <td className="px-6 py-4 text-sm text-muted-foreground">`false`</td>
          <td className="px-6 py-4 text-sm text-muted-foreground">No</td>
          <td className="px-6 py-4 text-sm">Include dependency analysis</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

## Authentication

All requests require an API key in the header:

```http
x-api-key: YOUR_API_KEY
```

## Extraction Depths

### Basic (Free Tier)
```bash
curl -H "x-api-key: YOUR_API_KEY" \
  "https://www.atelierlogos.studio/api/ferropipe/crate/serde?depth=basic"
```

**Returns:**
- Package name, version, description
- Basic documentation text
- Repository and homepage links
- Download statistics
- License information

### Full (Paid Tiers)
```bash
curl -H "x-api-key: YOUR_API_KEY" \
  "https://www.atelierlogos.studio/api/ferropipe/crate/serde?depth=full&examples=true"
```

**Returns everything from Basic plus:**
- Complete module documentation
- Function signatures and descriptions
- Struct and enum definitions
- Code examples from documentation
- Dependency analysis
- Feature flags

### Deep (Deep Tier Only)
```bash
curl -H "x-api-key: YOUR_API_KEY" \
  "https://www.atelierlogos.studio/api/ferropipe/crate/serde?depth=deep&fresh=true"
```

**Returns everything from Full plus:**
- AI-optimized documentation text
- Enhanced code examples
- Cross-reference analysis
- Advanced dependency mapping
- Source code insights

## Examples

### Basic Request
```bash
curl -H "x-api-key: YOUR_API_KEY" \
  "https://www.atelierlogos.studio/api/ferropipe/crate/serde"
```

### Specific Version
```bash
curl -H "x-api-key: YOUR_API_KEY" \
  "https://www.atelierlogos.studio/api/ferropipe/crate/tokio?version=1.0.0"
```

### Full Extraction with Examples
```bash
curl -H "x-api-key: YOUR_API_KEY" \
  "https://www.atelierlogos.studio/api/ferropipe/crate/clap?depth=full&examples=true&dependencies=true"
```

### JavaScript Example
```javascript
async function getCrate(name, options = {}) {
  const params = new URLSearchParams()
  
  if (options.version) params.append('version', options.version)
  if (options.depth) params.append('depth', options.depth)
  if (options.fresh) params.append('fresh', 'true')
  if (options.examples) params.append('examples', 'true')
  if (options.dependencies) params.append('dependencies', 'true')
  
  const url = `https://www.atelierlogos.studio/api/ferropipe/crate/${name}`
  const queryString = params.toString()
  
  const response = await fetch(queryString ? `${url}?${queryString}` : url, {
    headers: { 'x-api-key': process.env.FERROPIPE_API_KEY }
  })
  
  if (!response.ok) {
    throw new Error(`Failed to fetch crate: ${response.statusText}`)
  }
  
  return await response.json()
}

// Usage
const serde = await getCrate('serde', { 
  depth: 'full', 
  examples: true 
})
```

### Python Example
```python
import requests
from urllib.parse import urlencode

def get_crate(name, **options):
    headers = {'x-api-key': os.environ['FERROPIPE_API_KEY']}
    
    # Filter out None values and convert booleans
    params = {k: str(v).lower() if isinstance(v, bool) else v 
             for k, v in options.items() if v is not None}
    
    url = f"https://www.atelierlogos.studio/api/ferropipe/crate/{name}"
    if params:
        url += f"?{urlencode(params)}"
    
    response = requests.get(url, headers=headers)
    response.raise_for_status()
    return response.json()

# Usage
serde = get_crate('serde', depth='full', examples=True)
```

## Response Format

### Basic Response
```json
{
  "package_name": "serde",
  "version": "1.0.210",
  "extraction_depth": "basic",
  "description": "A generic serialization/deserialization framework",
  "documentation": "Serde is a framework for serializing and deserializing Rust data structures...",
  "repository": "https://github.com/serde-rs/serde",
  "homepage": "https://serde.rs",
  "documentation_url": "https://docs.rs/serde",
  "license": "MIT OR Apache-2.0",
  "downloads": 1234567890,
  "created_at": "2014-04-20T17:48:00.000Z",
  "updated_at": "2024-01-15T09:23:00.000Z",
  "cache_hit": true,
  "extracted_at": "2025-01-12T10:30:00Z"
}
```

### Full Response (Additional Fields)
```json
{
  "key_modules": {
    "serde": {
      "description": "Core serialization and deserialization traits",
      "functions": [
        {
          "name": "to_string",
          "signature": "pub fn to_string<T>(value: &T) -> Result<String, Error>",
          "description": "Serialize the given data structure as a String of JSON.",
          "examples": ["let json = serde_json::to_string(&value)?;"]
        }
      ],
      "structs": [
        {
          "name": "Serializer",
          "description": "A data structure that can be serialized into any data format",
          "fields": [...],
          "methods": [...]
        }
      ],
      "traits": [
        {
          "name": "Serialize",
          "description": "A data structure that can be serialized into any data format",
          "methods": [...]
        }
      ],
      "enums": [...]
    }
  },
  "features": [
    {
      "name": "derive",
      "description": "Provide derive(Serialize, Deserialize) macros.",
      "default": true
    }
  ],
  "dependencies": [
    {
      "name": "serde_derive",
      "version": "1.0.210",
      "optional": true,
      "features": [],
      "kind": "normal"
    }
  ],
  "examples": [
    {
      "name": "basic_usage",
      "description": "Basic serialization and deserialization",
      "code": "use serde::{Serialize, Deserialize};\n\n#[derive(Serialize, Deserialize)]\nstruct Point {\n    x: i32,\n    y: i32,\n}\n\nlet point = Point { x: 1, y: 2 };\nlet json = serde_json::to_string(&point)?;"
    }
  ]
}
```

### Deep Response (Additional Fields)
```json
{
  "llm_text": "Comprehensive AI-optimized documentation text suitable for language model training and processing...",
  "cross_references": {
    "used_by": ["serde_json", "serde_yaml", "bincode"],
    "similar_crates": ["rmp-serde", "toml", "ron"],
    "ecosystem_position": "core"
  },
  "source_analysis": {
    "total_lines": 15420,
    "doc_lines": 3240,
    "test_lines": 2100,
    "complexity_score": 7.2
  },
  "advanced_dependencies": {
    "dependency_tree": {...},
    "feature_analysis": {...},
    "version_compatibility": {...}
  }
}
```

## Error Responses

### Crate Not Found (404)
```json
{
  "error": "Crate not found",
  "code": "CRATE_NOT_FOUND",
  "details": "The requested crate 'nonexistent-crate' was not found in the registry."
}
```

### Version Not Found (404)
```json
{
  "error": "Version not found",
  "code": "VERSION_NOT_FOUND", 
  "details": "Version '999.0.0' not found for crate 'serde'."
}
```

### Rate Limit Exceeded (429)
```json
{
  "error": "Rate limit exceeded",
  "code": "RATE_LIMIT_EXCEEDED",
  "details": "You have exceeded your hourly rate limit of 100 requests.",
  "retry_after": 3600
}
```

### Tier Limitation (403)
```json
{
  "error": "Tier limitation",
  "code": "TIER_LIMITATION",
  "details": "The 'deep' extraction depth requires Deep tier access."
}
```

## Rate Limits

<div className="not-prose my-8">
  <div className="overflow-x-auto rounded-lg border border-border">
    <table className="w-full">
      <thead>
        <tr className="border-b border-border bg-muted/50">
          <th className="px-6 py-4 text-left text-sm font-medium text-muted-foreground">Tier</th>
          <th className="px-6 py-4 text-left text-sm font-medium text-muted-foreground">Requests/Hour</th>
          <th className="px-6 py-4 text-left text-sm font-medium text-muted-foreground">Fresh Requests</th>
          <th className="px-6 py-4 text-left text-sm font-medium text-muted-foreground">Examples</th>
          <th className="px-6 py-4 text-left text-sm font-medium text-muted-foreground">Dependencies</th>
        </tr>
      </thead>
      <tbody className="divide-y divide-border">
        <tr className="hover:bg-muted/30 transition-colors">
          <td className="px-6 py-4 text-sm font-medium">Basic</td>
          <td className="px-6 py-4 text-sm text-muted-foreground">100</td>
          <td className="px-6 py-4 text-sm text-muted-foreground">❌</td>
          <td className="px-6 py-4 text-sm text-muted-foreground">❌</td>
          <td className="px-6 py-4 text-sm text-muted-foreground">❌</td>
        </tr>
        <tr className="hover:bg-muted/30 transition-colors">
          <td className="px-6 py-4 text-sm font-medium">Full</td>
          <td className="px-6 py-4 text-sm text-muted-foreground">1,000</td>
          <td className="px-6 py-4 text-sm text-muted-foreground">Limited</td>
          <td className="px-6 py-4 text-sm text-muted-foreground">✅</td>
          <td className="px-6 py-4 text-sm text-muted-foreground">✅</td>
        </tr>
        <tr className="hover:bg-muted/30 transition-colors">
          <td className="px-6 py-4 text-sm font-medium">Deep</td>
          <td className="px-6 py-4 text-sm text-muted-foreground">5,000</td>
          <td className="px-6 py-4 text-sm text-muted-foreground">✅</td>
          <td className="px-6 py-4 text-sm text-muted-foreground">✅</td>
          <td className="px-6 py-4 text-sm text-muted-foreground">✅</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

**Note:** Fresh data requests (`fresh=true`) count as 2 requests against your rate limit.

## Caching

Response caching varies by content type:

- **Stable versions**: 24 hours
- **Latest versions**: 6 hours  
- **Pre-release versions**: 1 hour
- **Popular crates**: 1 hour (faster updates)

Use `fresh=true` to bypass cache when needed.

## Common Use Cases

### Documentation Site Generator
Perfect for building comprehensive documentation websites with structured crate information.

### Dependency Analysis
Analyze and visualize dependency relationships across the Rust ecosystem.

### AI Training Data
Extract clean, structured documentation text for training language models (Deep tier).

### Package Discovery
Find and explore new crates with detailed information and examples.

### Version Comparison
Compare different versions of the same crate to understand changes.

## Next Steps

- [Try this endpoint in the playground](/docs/ferropipe/playground)
- [See more examples](/docs/ferropipe/examples)
- [Explore other endpoints](/docs/ferropipe/api-reference)
