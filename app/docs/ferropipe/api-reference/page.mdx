# API Reference

Complete reference for all Ferropipe API endpoints, parameters, and response formats.

## Base URL

```
https://www.atelierlogos.studio/api/ferropipe
```

## Authentication

All API requests require authentication using an API key. Include your API key in the request header:

```http
x-api-key: YOUR_API_KEY
```

Alternatively, you can pass it as a query parameter:

```
?api_key=YOUR_API_KEY
```

## Endpoints Overview

<div className="not-prose my-8">
  <div className="overflow-x-auto rounded-lg border border-border">
    <table className="w-full">
      <thead>
        <tr className="border-b border-border bg-muted/50">
          <th className="px-6 py-4 text-left text-sm font-medium text-muted-foreground">Endpoint</th>
          <th className="px-6 py-4 text-left text-sm font-medium text-muted-foreground">Description</th>
          <th className="px-6 py-4 text-left text-sm font-medium text-muted-foreground">Requires Auth</th>
        </tr>
      </thead>
      <tbody className="divide-y divide-border">
        <tr className="hover:bg-muted/30 transition-colors">
          <td className="px-6 py-4 text-sm font-mono font-medium">`GET /crate/{name}`</td>
          <td className="px-6 py-4 text-sm">Get crate documentation</td>
          <td className="px-6 py-4 text-sm text-muted-foreground">Yes</td>
        </tr>
        <tr className="hover:bg-muted/30 transition-colors">
          <td className="px-6 py-4 text-sm font-mono font-medium">`GET /search`</td>
          <td className="px-6 py-4 text-sm">Search crates</td>
          <td className="px-6 py-4 text-sm text-muted-foreground">Yes</td>
        </tr>
        <tr className="hover:bg-muted/30 transition-colors">
          <td className="px-6 py-4 text-sm font-mono font-medium">`GET /bulk`</td>
          <td className="px-6 py-4 text-sm">Bulk crate requests</td>
          <td className="px-6 py-4 text-sm text-muted-foreground">Yes</td>
        </tr>
        <tr className="hover:bg-muted/30 transition-colors">
          <td className="px-6 py-4 text-sm font-mono font-medium">`GET /popular`</td>
          <td className="px-6 py-4 text-sm">Popular crates</td>
          <td className="px-6 py-4 text-sm text-muted-foreground">Yes</td>
        </tr>
        <tr className="hover:bg-muted/30 transition-colors">
          <td className="px-6 py-4 text-sm font-mono font-medium">`GET /debug`</td>
          <td className="px-6 py-4 text-sm">Debug information</td>
          <td className="px-6 py-4 text-sm text-muted-foreground">Yes</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

---

## Get Crate Documentation

Extract documentation and metadata for a specific Rust crate.

```http
GET /api/ferropipe/crate/{name}
```

### Parameters

<div className="not-prose my-8">
  <div className="overflow-x-auto rounded-lg border border-border">
    <table className="w-full">
      <thead>
        <tr className="border-b border-border bg-muted/50">
          <th className="px-6 py-4 text-left text-sm font-medium text-muted-foreground">Parameter</th>
          <th className="px-6 py-4 text-left text-sm font-medium text-muted-foreground">Type</th>
          <th className="px-6 py-4 text-left text-sm font-medium text-muted-foreground">Default</th>
          <th className="px-6 py-4 text-left text-sm font-medium text-muted-foreground">Description</th>
        </tr>
      </thead>
      <tbody className="divide-y divide-border">
        <tr className="hover:bg-muted/30 transition-colors">
          <td className="px-6 py-4 text-sm font-mono font-medium">`name`</td>
          <td className="px-6 py-4 text-sm text-muted-foreground">string</td>
          <td className="px-6 py-4 text-sm text-muted-foreground">Required</td>
          <td className="px-6 py-4 text-sm">Name of the crate</td>
        </tr>
        <tr className="hover:bg-muted/30 transition-colors">
          <td className="px-6 py-4 text-sm font-mono font-medium">`version`</td>
          <td className="px-6 py-4 text-sm text-muted-foreground">string</td>
          <td className="px-6 py-4 text-sm text-muted-foreground">`latest`</td>
          <td className="px-6 py-4 text-sm">Specific version or "latest"</td>
        </tr>
        <tr className="hover:bg-muted/30 transition-colors">
          <td className="px-6 py-4 text-sm font-mono font-medium">`depth`</td>
          <td className="px-6 py-4 text-sm text-muted-foreground">string</td>
          <td className="px-6 py-4 text-sm text-muted-foreground">`basic`</td>
          <td className="px-6 py-4 text-sm">Extraction depth: `basic`, `full`, `deep`</td>
        </tr>
        <tr className="hover:bg-muted/30 transition-colors">
          <td className="px-6 py-4 text-sm font-mono font-medium">`fresh`</td>
          <td className="px-6 py-4 text-sm text-muted-foreground">boolean</td>
          <td className="px-6 py-4 text-sm text-muted-foreground">`false`</td>
          <td className="px-6 py-4 text-sm">Bypass cache and get fresh data</td>
        </tr>
        <tr className="hover:bg-muted/30 transition-colors">
          <td className="px-6 py-4 text-sm font-mono font-medium">`examples`</td>
          <td className="px-6 py-4 text-sm text-muted-foreground">boolean</td>
          <td className="px-6 py-4 text-sm text-muted-foreground">`false`</td>
          <td className="px-6 py-4 text-sm">Include code examples (Full+ tier)</td>
        </tr>
        <tr className="hover:bg-muted/30 transition-colors">
          <td className="px-6 py-4 text-sm font-mono font-medium">`dependencies`</td>
          <td className="px-6 py-4 text-sm text-muted-foreground">boolean</td>
          <td className="px-6 py-4 text-sm text-muted-foreground">`false`</td>
          <td className="px-6 py-4 text-sm">Include dependency analysis</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

### Examples

#### Basic Request
```bash
curl -H "x-api-key: YOUR_API_KEY" \
  "https://www.atelierlogos.studio/api/ferropipe/crate/serde"
```

#### With Parameters
```bash
curl -H "x-api-key: YOUR_API_KEY" \
  "https://www.atelierlogos.studio/api/ferropipe/crate/tokio?version=1.0.0&depth=full&examples=true"
```

### Response Format

```json
{
  "package_name": "serde",
  "version": "1.0.210",
  "extraction_depth": "basic",
  "description": "A generic serialization/deserialization framework",
  "documentation": "Full documentation text...",
  "key_modules": {
    "serde": {
      "description": "Core serialization traits",
      "functions": [
        {
          "name": "to_string",
          "signature": "pub fn to_string<T>(value: &T) -> Result<String, Error>",
          "description": "Serialize the given data structure as a String of JSON."
        }
      ],
      "structs": [...],
      "traits": [...],
      "enums": [...]
    }
  },
  "features": [
    {
      "name": "derive",
      "description": "Provide derive(Serialize, Deserialize) macros."
    }
  ],
  "dependencies": [
    {
      "name": "serde_derive",
      "version": "1.0.210",
      "optional": true
    }
  ],
  "repository": "https://github.com/serde-rs/serde",
  "homepage": "https://serde.rs",
  "documentation_url": "https://docs.rs/serde",
  "downloads": 1234567890,
  "cache_hit": false,
  "extracted_at": "2025-01-12T10:30:00Z",
  "llm_text": "Comprehensive text for LLM consumption..."
}
```

### Tier Requirements

- **Basic**: `depth=basic`
- **Full**: `depth=full`, `examples=true`
- **Deep**: `depth=deep`, full source code analysis

---

## Search Crates

Search for crates by name, description, or keywords.

```http
GET /api/ferropipe/search
```

### Parameters

<div className="not-prose my-8">
  <div className="overflow-x-auto rounded-lg border border-border">
    <table className="w-full">
      <thead>
        <tr className="border-b border-border bg-muted/50">
          <th className="px-6 py-4 text-left text-sm font-medium text-muted-foreground">Parameter</th>
          <th className="px-6 py-4 text-left text-sm font-medium text-muted-foreground">Type</th>
          <th className="px-6 py-4 text-left text-sm font-medium text-muted-foreground">Default</th>
          <th className="px-6 py-4 text-left text-sm font-medium text-muted-foreground">Description</th>
        </tr>
      </thead>
      <tbody className="divide-y divide-border">
        <tr className="hover:bg-muted/30 transition-colors">
          <td className="px-6 py-4 text-sm font-mono font-medium">`q`</td>
          <td className="px-6 py-4 text-sm text-muted-foreground">string</td>
          <td className="px-6 py-4 text-sm text-muted-foreground">Required</td>
          <td className="px-6 py-4 text-sm">Search query</td>
        </tr>
        <tr className="hover:bg-muted/30 transition-colors">
          <td className="px-6 py-4 text-sm font-mono font-medium">`limit`</td>
          <td className="px-6 py-4 text-sm text-muted-foreground">integer</td>
          <td className="px-6 py-4 text-sm text-muted-foreground">`10`</td>
          <td className="px-6 py-4 text-sm">Maximum results (1-100)</td>
        </tr>
        <tr className="hover:bg-muted/30 transition-colors">
          <td className="px-6 py-4 text-sm font-mono font-medium">`sort`</td>
          <td className="px-6 py-4 text-sm text-muted-foreground">string</td>
          <td className="px-6 py-4 text-sm text-muted-foreground">`downloads`</td>
          <td className="px-6 py-4 text-sm">Sort by: `downloads`, `relevance`, `name`</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

### Example

```bash
curl -H "x-api-key: YOUR_API_KEY" \
  "https://www.atelierlogos.studio/api/ferropipe/search?q=serialization&limit=5"
```

### Response Format

```json
{
  "query": "serialization",
  "total": 1337,
  "results": [
    {
      "name": "serde",
      "version": "1.0.210",
      "description": "A generic serialization/deserialization framework",
      "downloads": 1234567890,
      "score": 0.95
    }
  ]
}
```

---

## Bulk Requests

Request multiple crates in a single API call.

```http
GET /api/ferropipe/bulk
```

### Parameters

<div className="not-prose my-8">
  <div className="overflow-x-auto rounded-lg border border-border">
    <table className="w-full">
      <thead>
        <tr className="border-b border-border bg-muted/50">
          <th className="px-6 py-4 text-left text-sm font-medium text-muted-foreground">Parameter</th>
          <th className="px-6 py-4 text-left text-sm font-medium text-muted-foreground">Type</th>
          <th className="px-6 py-4 text-left text-sm font-medium text-muted-foreground">Default</th>
          <th className="px-6 py-4 text-left text-sm font-medium text-muted-foreground">Description</th>
        </tr>
      </thead>
      <tbody className="divide-y divide-border">
        <tr className="hover:bg-muted/30 transition-colors">
          <td className="px-6 py-4 text-sm font-mono font-medium">`crates`</td>
          <td className="px-6 py-4 text-sm text-muted-foreground">string</td>
          <td className="px-6 py-4 text-sm text-muted-foreground">Required</td>
          <td className="px-6 py-4 text-sm">Comma-separated list of crate names</td>
        </tr>
        <tr className="hover:bg-muted/30 transition-colors">
          <td className="px-6 py-4 text-sm font-mono font-medium">`depth`</td>
          <td className="px-6 py-4 text-sm text-muted-foreground">string</td>
          <td className="px-6 py-4 text-sm text-muted-foreground">`basic`</td>
          <td className="px-6 py-4 text-sm">Extraction depth for all crates</td>
        </tr>
        <tr className="hover:bg-muted/30 transition-colors">
          <td className="px-6 py-4 text-sm font-mono font-medium">`limit`</td>
          <td className="px-6 py-4 text-sm text-muted-foreground">integer</td>
          <td className="px-6 py-4 text-sm text-muted-foreground">`10`</td>
          <td className="px-6 py-4 text-sm">Maximum crates per request</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

### Example

```bash
curl -H "x-api-key: YOUR_API_KEY" \
  "https://www.atelierlogos.studio/api/ferropipe/bulk?crates=serde,tokio,clap"
```

### Response Format

```json
{
  "requested": ["serde", "tokio", "clap"],
  "successful": 3,
  "failed": 0,
  "results": {
    "serde": { /* crate data */ },
    "tokio": { /* crate data */ },
    "clap": { /* crate data */ }
  },
  "errors": {}
}
```

### Tier Limits

- **Basic**: 5 crates per request
- **Full**: 25 crates per request
- **Deep**: 100 crates per request

---

## Popular Crates

Get the most popular Rust crates.

```http
GET /api/ferropipe/popular
```

### Parameters

<div className="not-prose my-8">
  <div className="overflow-x-auto rounded-lg border border-border">
    <table className="w-full">
      <thead>
        <tr className="border-b border-border bg-muted/50">
          <th className="px-6 py-4 text-left text-sm font-medium text-muted-foreground">Parameter</th>
          <th className="px-6 py-4 text-left text-sm font-medium text-muted-foreground">Type</th>
          <th className="px-6 py-4 text-left text-sm font-medium text-muted-foreground">Default</th>
          <th className="px-6 py-4 text-left text-sm font-medium text-muted-foreground">Description</th>
        </tr>
      </thead>
      <tbody className="divide-y divide-border">
        <tr className="hover:bg-muted/30 transition-colors">
          <td className="px-6 py-4 text-sm font-mono font-medium">`limit`</td>
          <td className="px-6 py-4 text-sm text-muted-foreground">integer</td>
          <td className="px-6 py-4 text-sm text-muted-foreground">`20`</td>
          <td className="px-6 py-4 text-sm">Number of crates to return (1-100)</td>
        </tr>
        <tr className="hover:bg-muted/30 transition-colors">
          <td className="px-6 py-4 text-sm font-mono font-medium">`category`</td>
          <td className="px-6 py-4 text-sm text-muted-foreground">string</td>
          <td className="px-6 py-4 text-sm text-muted-foreground">`all`</td>
          <td className="px-6 py-4 text-sm">Filter by category</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

### Example

```bash
curl -H "x-api-key: YOUR_API_KEY" \
  "https://www.atelierlogos.studio/api/ferropipe/popular?limit=10"
```

### Response Format

```json
{
  "total": 100,
  "crates": [
    {
      "name": "serde",
      "version": "1.0.210",
      "description": "A generic serialization/deserialization framework",
      "downloads": 1234567890,
      "rank": 1
    }
  ]
}
```

---

## Debug Information

Get debug information about the API status and your usage.

```http
GET /api/ferropipe/debug
```

### Example

```bash
curl -H "x-api-key: YOUR_API_KEY" \
  "https://www.atelierlogos.studio/api/ferropipe/debug"
```

### Response Format

```json
{
  "status": "operational",
  "version": "1.0.0",
  "user": {
    "tier": "full",
    "requests_today": 45,
    "rate_limit": 1000,
    "rate_limit_reset": "2025-01-12T11:00:00Z"
  },
  "cache": {
    "hit_rate": 0.85,
    "total_entries": 150000
  }
}
```

---

## Error Responses

All endpoints return consistent error formats:

```json
{
  "error": "Error description",
  "code": "ERROR_CODE",
  "details": "Additional details if available"
}
```

### Common Error Codes

<div className="not-prose my-8">
  <div className="overflow-x-auto rounded-lg border border-border">
    <table className="w-full">
      <thead>
        <tr className="border-b border-border bg-muted/50">
          <th className="px-6 py-4 text-left text-sm font-medium text-muted-foreground">Code</th>
          <th className="px-6 py-4 text-left text-sm font-medium text-muted-foreground">Status</th>
          <th className="px-6 py-4 text-left text-sm font-medium text-muted-foreground">Description</th>
        </tr>
      </thead>
      <tbody className="divide-y divide-border">
        <tr className="hover:bg-muted/30 transition-colors">
          <td className="px-6 py-4 text-sm font-mono font-medium">`INVALID_API_KEY`</td>
          <td className="px-6 py-4 text-sm text-muted-foreground">401</td>
          <td className="px-6 py-4 text-sm">API key is missing or invalid</td>
        </tr>
        <tr className="hover:bg-muted/30 transition-colors">
          <td className="px-6 py-4 text-sm font-mono font-medium">`RATE_LIMIT_EXCEEDED`</td>
          <td className="px-6 py-4 text-sm text-muted-foreground">429</td>
          <td className="px-6 py-4 text-sm">Rate limit exceeded for your tier</td>
        </tr>
        <tr className="hover:bg-muted/30 transition-colors">
          <td className="px-6 py-4 text-sm font-mono font-medium">`CRATE_NOT_FOUND`</td>
          <td className="px-6 py-4 text-sm text-muted-foreground">404</td>
          <td className="px-6 py-4 text-sm">Requested crate doesn't exist</td>
        </tr>
        <tr className="hover:bg-muted/30 transition-colors">
          <td className="px-6 py-4 text-sm font-mono font-medium">`TIER_LIMITATION`</td>
          <td className="px-6 py-4 text-sm text-muted-foreground">403</td>
          <td className="px-6 py-4 text-sm">Feature requires higher tier</td>
        </tr>
        <tr className="hover:bg-muted/30 transition-colors">
          <td className="px-6 py-4 text-sm font-mono font-medium">`INVALID_PARAMETERS`</td>
          <td className="px-6 py-4 text-sm text-muted-foreground">400</td>
          <td className="px-6 py-4 text-sm">Request parameters are invalid</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

---

## Rate Limits

Rate limits are enforced per API key on a rolling minute window:

<div className="not-prose my-8">
  <div className="overflow-x-auto rounded-lg border border-border">
    <table className="w-full">
      <thead>
        <tr className="border-b border-border bg-muted/50">
          <th className="px-6 py-4 text-left text-sm font-medium text-muted-foreground">Tier</th>
          <th className="px-6 py-4 text-center text-sm font-medium text-muted-foreground">Requests/Minute</th>
          <th className="px-6 py-4 text-center text-sm font-medium text-muted-foreground">Bulk Limit</th>
          <th className="px-6 py-4 text-center text-sm font-medium text-muted-foreground">Pricing</th>
        </tr>
      </thead>
      <tbody className="divide-y divide-border">
        <tr className="hover:bg-muted/30 transition-colors">
          <td className="px-6 py-4 text-sm font-medium">Basic</td>
          <td className="px-6 py-4 text-center text-sm text-muted-foreground">100</td>
          <td className="px-6 py-4 text-center text-sm text-muted-foreground">5 crates</td>
          <td className="px-6 py-4 text-center text-sm text-muted-foreground">$350/month</td>
        </tr>
        <tr className="hover:bg-muted/30 transition-colors">
          <td className="px-6 py-4 text-sm font-medium">Full</td>
          <td className="px-6 py-4 text-center text-sm text-muted-foreground">1,000</td>
          <td className="px-6 py-4 text-center text-sm text-muted-foreground">25 crates</td>
          <td className="px-6 py-4 text-center text-sm text-muted-foreground">$1,500/month</td>
        </tr>
        <tr className="hover:bg-muted/30 transition-colors">
          <td className="px-6 py-4 text-sm font-medium">Deep</td>
          <td className="px-6 py-4 text-center text-sm text-muted-foreground">5,000</td>
          <td className="px-6 py-4 text-center text-sm text-muted-foreground">100 crates</td>
          <td className="px-6 py-4 text-center text-sm text-muted-foreground">$4,500/month</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

Rate limit headers are included in all responses:

```http
X-RateLimit-Limit: 1000
X-RateLimit-Remaining: 945
X-RateLimit-Reset: 1751410800
X-RateLimit-Used: 55
```

---

## Response Caching

Responses are cached to improve performance:

- **Popular crates**: 1 hour
- **Stable versions**: 24 hours
- **Latest versions**: 6 hours
- **Pre-release versions**: 1 hour

Use `fresh=true` to bypass cache when needed.

---

## Next Steps

- Try the [API Playground](/docs/ferropipe/playground) for interactive testing
- Check out [Examples](/docs/ferropipe/examples) for integration patterns
- Review [Pricing](/docs/ferropipe/pricing) for tier details
